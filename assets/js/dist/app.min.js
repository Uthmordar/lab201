!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";var b,c,d,e,f,g={open:{$el:$("#window_open"),$display:$("#windows_open_output .display"),state:0,initialState:0},shutter:{$el:$("#window_shutter"),$display:$("#windows_shutter_output .display"),state:0,initialState:0}},h=[$("#bg_7"),$("#bg_7"),$("#bg_5"),$("#bg_1"),$("#bg_2"),$("#bg_2"),$("#bg_2"),$("#bg_3"),$("#bg_4"),$("#bg_5"),$("#bg_6"),$("#bg_7"),$("#bg_7")],i={table:{$el:$("#lamp_table"),$display:$("#lamp_table_output .display"),lux:0,initialLux:0,posX:0,posY:0,state:0,active:0,intensity:0},plan:{$el:$("#lamp_plan"),$display:$("#lamp_plan_output .display"),lux:0,initialLux:0,posX:0,posY:0,state:0,active:0,intensity:0},hotte:{$el:$("#lamp_hotte"),$display:$("#lamp_hotte_output .display"),lux:0,initialLux:0,posX:0,posY:0,state:0,active:0,intensity:0},wall:{$el:$("#lamp_wall"),$display:$("#lamp_wall_output .display"),lux:0,initialLux:0,posX:0,posY:0,state:0,active:0,intensity:0}},j=[{$el:$("#user"),alive:1,width:0,height:0}],k={$el:$("#ventilation"),debit:0,initialDebit:0,$display:$("#ventilation_output .display")},l={$el:$("#heating"),power:0,initialPower:0,$display:$("#heating_output .display")},m={$el:$("#hygro"),hygro:0,initialHygro:0,$display:$("#hygro_output .display")},n={ext:{$el:$("#temp_ext"),t:15,initialT:0,$display:$("#temp_ext_output .display")},inside:{$el:$("#temp_int"),t:18,initialT:0,$display:$("#temp_int_output .display")}},o={$el:$("#grill"),power:0,initialPower:0,posX:0,posY:0,$display:$("#grill_output .display")},p={windowOpen:0,time:{hour:12,minute:0,timestamp:43200},luxEnv:5e4,hygrometrie:{hygro:80,time:{low:0,medium:0,high:0}},user:{x:0,y:0,status:1},grill:{power:0,time:{low:0,medium:0,high:0}},luxHotte:0,luxPlan:0,luxTable:0,luxWall:0,ventilation:0,tempExt:15,tempInt:18,heating:0,windows:{open:0,shutter:0}},q={initialize:function(a){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),this.setScene(a),this.params.initialize(p),this.form.initialize($("#submit_rules")),this.windows.initialize(g),this.lamps.initialize(i),this.env.initialize(h),this.user.initialize(j,b),this.ventilation.initialize(k),this.heating.initialize(l),this.hygro.initialize(m),this.temperature.initialize(n),this.grill.initialize(o),this.controller.initialize()},getScene:function(){return b},setScene:function(a){b=a,c=a.offset().left,d=a.offset().top,e=parseFloat(a.width()),f=parseFloat(a.height())},getSceneOffset:function(){return{x:c,y:d}},getSceneWidth:function(){return e},getSceneHeight:function(){return f}};a.app=q}(window),function(a){"use strict";var b,c,d,e,f,g={initialize:function(a){b=$(".circle.more"),c=$("#rules_form"),d=$("#app_blur"),f=c.children(".pop_in").children(".close"),e=a,h.bindEvents()},bindEvents:function(){b.on("click",function(a){a.preventDefault(),h.displayPopIn()}),e.on("click",function(a){a.preventDefault(),h.hidePopIn()}),f.on("click",function(a){a.preventDefault(),h.hidePopIn()})},displayPopIn:function(){c.removeClass("hidden"),c.css({left:.5*window.innerWidth-.5*c.width()+"px",top:.5*window.innerHeight-.5*c.height()+"px"}),d.addClass("blur")},hidePopIn:function(){c.addClass("hidden"),d.removeClass("blur")}};a.form=g;var h=g}(app),function(a){"use strict";var b={initialize:function(a){c.open.initialize(a.open),c.shutter.initialize(a.shutter)},bindEvents:function(){}};a.windows=b;var c=b}(app),function(a){"use strict";var b,c,d,e={initialize:function(a){d=$("#windows_open_input"),f.setData(a),f.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),f.setState($(this).val()).updateState()})},setState:function(a){return d.val(a),b.initialState=b.state,b.state=a,window.app.params.setWindowsOpen(a),f},updateState:function(){c=0,requestAnimFrame(f.changeDisplayVal),f.changeDisplayVal()},changeDisplayVal:function(){b.initialState<b.state?c+parseInt(b.$display.html())>b.state?b.$display.html(b.state):(requestAnimFrame(f.changeDisplayVal),c+=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c))):c+parseInt(b.$display.html())<b.state?b.$display.html(b.state):(requestAnimFrame(f.changeDisplayVal),c-=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c)))}};a.open=e;var f=e}(app.windows),function(a){"use strict";var b,c,d,e,f,g,h,i={initialize:function(a){d=$("#windows_shutter_input"),e=Snap("#windows_shutter"),g=250,h=430,f=e.rect(0,0,g,0),f.attr({fill:"#000"}),j.setData(a),j.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),j.setState($(this).val()).updateState()})},setState:function(a){return d.val(a),b.initialState=b.state,b.state=a,window.app.params.setWindowsShutter(a),j},updateState:function(){c=0,j.viewChange()},changeDisplayVal:function(){b.initialState<b.state?c+parseInt(b.$display.html())>b.state?b.$display.html(b.state):(requestAnimFrame(j.changeDisplayVal),c+=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c))):c+parseInt(b.$display.html())<b.state?b.$display.html(b.state):(requestAnimFrame(j.changeDisplayVal),c-=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c)))},viewChange:function(){f.animate({height:.01*h*b.state},500)}};a.shutter=i;var j=i}(app.windows),function(a){"use strict";var b={initialize:function(a){c.hotte.initialize(a.hotte),c.plan.initialize(a.plan),c.table.initialize(a.table),c.wall.initialize(a.wall)},bindEvents:function(){}};a.lamps=b;var c=b}(app),function(a){"use strict";var b,c,d,e,f,g,h={initialize:function(a){d=$("#lux_table_input"),a.posX=$("#lamp_table").offset().left,a.posY=$("#lamp_table").offset().top,g=d.attr("max"),e=Snap("#lux_table"),f=e.image("assets/img/scene/lux_table.svg",-75,-85,440,540).attr({opacity:0}),window.app.params.setPositionLuxTable(a.posX,a.posY),i.setData(a),i.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),i.setLux($(this).val()).updateLux()})},setLux:function(a){return d.val(a),b.initialLux=b.lux,b.lux=a,window.app.params.setLuxTable(a),i},updateLux:function(){c=0,i.viewLamp()},changeDisplayVal:function(){b.initialLux<b.lux?c+parseInt(b.$display.html())>b.lux?b.$display.html(b.lux):(requestAnimFrame(i.changeDisplayVal),c+=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c))):c+parseInt(b.$display.html())<b.lux?b.$display.html(b.lux):(requestAnimFrame(i.changeDisplayVal),c-=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c)))},viewLamp:function(){f.animate({opacity:b.lux/g*1.2},400)}};a.table=h;var i=h}(app.lamps),function(a){"use strict";var b,c,d,e,f,g,h={initialize:function(a){d=$("#lux_plan_input"),i.setData(a),a.posX=$("#lux_plan").offset().left,a.posY=$("#lux_plan").offset().top,g=d.attr("max"),e=Snap("#lux_plan"),f=e.image("assets/img/scene/lux_plan.svg",0,0,300,150).attr({opacity:0}),window.app.params.setPositionLuxPlan(a.posX,a.posY),i.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),i.setLux($(this).val()).updateLux()})},setLux:function(a){return d.val(a),b.initialLux=b.lux,b.lux=a,window.app.params.setLuxPlan(a),i},updateLux:function(){c=0,i.viewLamp()},changeDisplayVal:function(){b.initialLux<b.lux?c+parseInt(b.$display.html())>b.lux?b.$display.html(b.lux):(requestAnimFrame(i.changeDisplayVal),c+=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c))):c+parseInt(b.$display.html())<b.lux?b.$display.html(b.lux):(requestAnimFrame(i.changeDisplayVal),c-=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c)))},viewLamp:function(){f.animate({opacity:b.lux/g*2},400)}};a.plan=h;var i=h}(app.lamps),function(a){"use strict";var b,c,d,e,f,g,h={initialize:function(a){d=$("#lux_hotte_input"),a.posX=$("#hotte").offset().left,a.posY=$("#hotte").offset().top,g=d.attr("max"),e=Snap("#lux_hotte"),f=e.image("assets/img/scene/lux_hotte.svg",-110,-160,500,500).attr({opacity:0}),window.app.params.setPositionLuxHotte(a.posX,a.posY),i.setData(a),i.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),i.setLux($(this).val()).updateLux()})},setLux:function(a){return d.val(a),b.initialLux=b.lux,b.lux=a,window.app.params.setLuxHotte(a),i},updateLux:function(){c=0,i.viewLamp()},changeDisplayVal:function(){b.initialLux<b.lux?c+parseInt(b.$display.html())>b.lux?b.$display.html(b.lux):(requestAnimFrame(i.changeDisplayVal),c+=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c))):c+parseInt(b.$display.html())<b.lux?b.$display.html(b.lux):(requestAnimFrame(i.changeDisplayVal),c-=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c)))},viewLamp:function(){f.animate({opacity:b.lux/g*1.2},400)}};a.hotte=h;var i=h}(app.lamps),function(a){"use strict";var b,c,d,e,f,g,h={initialize:function(a){d=$("#lux_wall_input"),a.posX=$("#lamp_wall").offset().left,a.posY=$("#lamp_wall").offset().top,g=d.attr("max"),e=Snap("#lux_wall"),f=e.image("assets/img/scene/lux_wall.svg",-187,-200,520,520).attr({opacity:0}),window.app.params.setPositionLuxWall(a.posX,a.posY),i.setData(a),i.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),i.setLux($(this).val()).updateLux()})},setLux:function(a){return d.val(a),b.initialLux=b.lux,b.lux=a,window.app.params.setLuxWall(a),i},updateLux:function(){c=0,i.viewLamp()},changeDisplayVal:function(){b.initialLux<b.lux?c+parseInt(b.$display.html())>b.lux?b.$display.html(b.lux):(requestAnimFrame(i.changeDisplayVal),c+=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c))):c+parseInt(b.$display.html())<b.lux?b.$display.html(b.lux):(requestAnimFrame(i.changeDisplayVal),c-=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c)))},viewLamp:function(){f.animate({opacity:b.lux/g*1.2},400)}};a.wall=h;var i=h}(app.lamps),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=$(".circle.time"),C=$("#slider_time"),D=C.width()/2,E=C.height()/2,F=70,G=180,H=B.offset(),I={x:H.left,y:H.top},J=0,K=0,L=!1,M={x:I.x,y:I.y},N=Math.atan2(M.x-F,M.y-F),O=$(".circle.luminosity"),P=$("#slider_luminosity"),Q=P.width()/2,R=P.height()/2,S=70,T=180,U=O.offset(),V={x:U.left,y:U.top},W=0,X=0,Y=!1,Z={x:V.x,y:V.y},_=Math.atan2(Z.x-S,Z.y-S),ab={initialize:function(f){n=$("#time_input"),p=$("#darkness_input"),q=$("#darkness"),w=$("#luminosity_output .display"),t=$("#timer"),o=p.val(),z=parseInt(n.attr("max")),A=parseInt(p.attr("max")),c=$("#sun"),b=$("#moon"),d=.5*window.innerWidth,e=window.innerHeight-94,h=.98*e,g=0,x=$("#nuages"),y=0,r=a.params.getParams().time,l=Math.floor(r.timestamp/7200),bb.setData(f),J=Math.round(F*Math.sin(G*Math.PI/180)),K=Math.round(F*-Math.cos(G*Math.PI/180)),C.css({left:J+F-D,top:K+F-E}),n.attr("value",G*(z/360)).val(G*(z/360)),W=Math.round(S*Math.sin(T*Math.PI/180)),X=Math.round(S*-Math.cos(T*Math.PI/180)),P.css({left:W+S-Q,top:X+S-R}),p.attr("value",T*(A/360)),bb.bindEvents(),requestAnimFrame(bb.timeProgress),bb.timeProgress(),bb.changeDarknessDisplayVal()},getData:function(){return k},setData:function(a){k=a},getDarkness:function(){return o},setDarkness:function(b){return o=b,a.params.setLuxEnv(b),bb},getTime:function(){return r},setTime:function(b){u=Math.floor(b/3600),v=Math.floor((b-60*u*60)/60),a.params.setTime(u,v,b),r.hour=10>u?"0"+u:u,r.minute=10>v?"0"+v:v,r.timestamp=parseInt(b)},bindEvents:function(){n.on("change",function(a){a.preventDefault(),$(this).attr("value",$(this).val()),bb.updateTime(this)}),p.on("change",function(b){b.preventDefault(),s=$(this).val(),a.params.setLuxEnv(s),bb.setDarkness(s),bb.changeDarkness()}),B.mousedown(function(){L=!0}).mouseup(function(){L=!1}).mousemove(function(a){L&&(M={x:a.clientX-I.x,y:a.clientY-I.y},N=Math.atan2(M.x-F,M.y-F),G=-N/(Math.PI/180)+180,J=Math.round(F*Math.sin(G*Math.PI/180)),K=Math.round(F*-Math.cos(G*Math.PI/180)),C.css({left:J+F-D,top:K+F-E}),n.attr("value",G*(z/360)).val(G*(z/360)))}),O.mousedown(function(){Y=!0}).mouseup(function(){Y=!1}).mousemove(function(a){Y&&(Z={x:a.clientX-V.x,y:a.clientY-V.y},_=Math.atan2(Z.x-S,Z.y-S),T=-_/(Math.PI/180)+180,W=Math.round(S*Math.sin(T*Math.PI/180)),X=Math.round(S*-Math.cos(T*Math.PI/180)),P.css({left:W+S-Q,top:X+S-R}),p.attr("value",T*(A/360)).val(T*(A/360)),bb.setDarkness(T*(A/360)).changeDarkness())})},updateTime:function(a){s=$(a).attr("value"),m=Math.floor(s/7200),bb.setTime(s),bb.changeTime(l,m),bb.changeClock(),bb.rotateSun(s),bb.moveCloud(s)},rotateSun:function(a){f=a.timestamp/86400*360,f=f*Math.PI/180+.5*Math.PI,g+=.01,i=d+h*Math.cos(f),j=e+h*Math.sin(f),c.css({left:i+"px",top:j+"px"}),i=d+h*Math.cos(f-Math.PI),j=e+h*Math.sin(f-Math.PI),b.css({left:i+"px",top:j+"px"})},moveCloud:function(){y+=.5,x.css("background","url(assets/img/fond/fond_nuage_1.svg) "+.7*y+"px -80px repeat-x, url(assets/img/fond/fond_nuage_2.svg) "+y+"px 50px repeat-x, url(assets/img/fond/fond_nuage_1.svg) "+1.8*y+"px 100px repeat-x")},changeTime:function(a,b){k[a].css("opacity",0),k[b].css("opacity",1),l=b},changeClock:function(){s=bb.getTime(),t.children("#hour").html(s.hour).siblings("#minute").html(s.minute)},changeDarkness:function(){o>25e3?q.css("opacity",0):o>5e3?q.css("opacity",.4):q.css("opacity",.9),bb.changeDarknessDisplayVal()},timeProgress:function(){requestAnimFrame(bb.timeProgress),86400==n.attr("value")?(n.val(1),n.attr("value",1)):n.attr("value",parseInt(n.attr("value"))+1),bb.updateTime(n),a.controller.controlOutput()},changeDarknessDisplayVal:function(){w.html(Math.floor(o)),w.parent().siblings(".circle").eq(0).css("border","3px solid rgba(255,255,255,"+parseFloat(.1+o/A)+")")}};a.env=ab;var bb=ab}(app),function(a){"use strict";var b,c,d,e,f,g,h,i={initialize:function(b){c=$("#user_input"),j.setData(b),g=a.getSceneOffset().x,h=a.getSceneOffset().y,b.length>0&&j.setActiveUser(0);for(var d=0;d<b.length;d++)j.setDimensions(d);j.bindEvents()},getData:function(){return b},setData:function(a){b=a},getActiveUser:function(){return d},setActiveUser:function(a){d=a},setDimensions:function(a){b[a].width=b[a].$el.width(),b[a].height=b[a].$el.height()},bindEvents:function(){c.on("click",function(e){e.preventDefault(),1===b[d].alive?(b[d].alive=0,a.params.setUserStatus(0),b[d].$el.css("display","none"),c.val("N0")):(b[d].alive=1,a.params.setUserStatus(1),b[d].$el.css("display","block"),c.val("YES"))}),b[d].$el.on("mousedown",function(){var c=$(this);c.on("mousemove",function(c){c.preventDefault(),f=c.clientY-h-.5*b[d].height,e=c.clientX-g-.5*b[d].width,320>f&&f>212&&e>-80&&950>e&&(a.params.setUserPos(e,f),$(this).css({top:f+"px",left:e+"px"}),a.controller.controlOutput())}),c.on("mouseup",function(){$(this).off("mousemove")})})}};a.user=i;var j=i}(app),function(a){"use strict";var b={windowOpen:0,time:{hour:12,minute:0,timestamp:43200},luxEnv:0,hygrometrie:{hygro:0,time:{low:0,medium:0,high:0}},user:{x:0,y:0,status:0},grill:{power:0,time:{low:0,medium:0,high:0}},luxHotte:0,luxPlan:0,luxTable:0,luxWall:0,ventilation:0,tempExt:0,tempInt:0,heating:0,windows:{open:0,shutter:0}},c={luxHotte:{x:0,y:0},luxPlan:{x:0,y:0},luxTable:{x:0,y:0},luxWall:{x:0,y:0},grill:{x:0,y:0}},b={initialize:function(a){b=a},getParams:function(){return b},setWindow:function(a){b.windowOpen=parseInt(a)},setTime:function(a,c,d){b.time.hour=parseInt(a),b.time.minute=parseInt(c),b.time.timestamp=d},setLuxEnv:function(a){b.luxEnv=parseInt(a)},setHygro:function(a){b.hygrometrie.hygro=parseInt(a)},setHygroTime:function(a,c,d){b.hygrometrie.time.low=parseInt(a),b.hygrometrie.time.medium=parseInt(c),b.hygrometrie.time.high=parseInt(d)},setUserPos:function(a,c){b.user.x=parseInt(a),b.user.y=parseInt(c)},setUserStatus:function(a){b.user.status=a?1:0},setGrill:function(a){b.grill.power=parseInt(a)},setGrillTime:function(a,c,d){b.grill.time.low=parseInt(a),b.grill.time.medium=parseInt(c),b.grill.time.high=parseInt(d)},setLuxHotte:function(a){b.luxHotte=parseInt(a)},setLuxPlan:function(a){b.luxPlan=parseInt(a)},setLuxTable:function(a){b.luxTable=parseInt(a)},setLuxWall:function(a){b.luxWall=parseInt(a)},setVentilation:function(a){b.ventilation=parseInt(a)},setTempExt:function(a){b.tempExt=parseInt(a)},setTempInt:function(a){b.tempInt=parseInt(a)},setHeating:function(a){b.heating=parseInt(a)},setWindowsOpen:function(a){parseInt(a)<=100&&parseInt(a)>=0&&(b.windows.open=parseInt(a))},setWindowsShutter:function(a){parseInt(a)<=100&&parseInt(a)>=0&&(b.windows.shutter=parseInt(a))},setPositionLuxPlan:function(b,d){c.luxPlan.x=b-a.getSceneOffset().x,c.luxPlan.y=d-a.getSceneOffset().y},setPositionLuxHotte:function(b,d){c.luxHotte.x=b-a.getSceneOffset().x,c.luxHotte.y=d-a.getSceneOffset().y},setPositionLuxTable:function(b,d){c.luxTable.x=b-a.getSceneOffset().x,c.luxTable.y=d-a.getSceneOffset().y},setPositionLuxWall:function(b,d){c.luxWall.x=b-a.getSceneOffset().x,c.luxWall.y=d-a.getSceneOffset().y},setPositionGrill:function(b,d){c.grill.x=b-a.getSceneOffset().x,c.grill.y=d-a.getSceneOffset().y},getPosition:function(){return c}};a.params=b}(app),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k={initialize:function(a){d=$("#ventilation_input"),j=d.attr("max"),e=$("#hotte_power"),f=Snap("#hotte_power"),i="#FFF",g=Snap.load("assets/img/scene/hotte_power.svg",function(a){h=a.selectAll("path").attr({fill:i,opacity:0}),f.append(h)}),l.setData(a),l.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),l.setDataDebit($(this).val()).updateVentilation()})},setDataDebit:function(c){return d.val(c),b.initialDebit=b.debit,b.debit=c,a.params.setVentilation(c),l},updateVentilation:function(){c=0,l.viewVentilation()},changeDisplayVal:function(){b.initialDebit<b.debit?c+parseInt(b.$display.html())>b.debit?b.$display.html(b.debit):(requestAnimFrame(l.changeDisplayVal),c+=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c))):c+parseInt(b.$display.html())<b.debit?b.$display.html(b.debit):(requestAnimFrame(l.changeDisplayVal),c-=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c)))},viewVentilation:function(){b.debit<.3*j?e.css("width","25px"):b.debit<.6*j?e.css("width","40px"):e.css("width","60px"),h.animate({opacity:b.debit/j*2},500)}};a.ventilation=k;var l=k}(app),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k={initialize:function(a){d=$("#heating_input"),j=d.attr("max"),e=Snap("#heating"),h="#BC3D41",i="#FFF",f=Snap.load("assets/img/scene/heating.svg",function(a){g=a.selectAll("path").attr({fill:i,opacity:0}),e.append(g)}),l.setData(a),l.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),l.setHeatingPower($(this).val()).updateHeating()})},setHeatingPower:function(c){return d.val(c).attr("value",c),b.initialPower=b.power,b.power=c,a.params.setHeating(c),l},updateHeating:function(){c=0,l.viewHeating()},changeDisplayVal:function(){b.initialPower<b.power?c+parseInt(b.$display.html())>b.power?b.$display.html(b.power):(requestAnimFrame(l.changeDisplayVal),c+=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c))):c+parseInt(b.$display.html())<b.power?b.$display.html(b.power):(requestAnimFrame(l.changeDisplayVal),c-=.1,b.$display.html(Math.floor(parseInt(b.$display.html())+c)))},viewHeating:function(){b.power>300?g.animate({opacity:b.power/j,fill:h},500):g.animate({opacity:b.power/j*5,fill:i},500)}};a.heating=k;var l=k}(app),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m=$(".circle.humidity"),n=$("#slider_humidity"),o=n.width()/2,p=n.height()/2,q=70,r=120,s=m.offset(),t={x:s.left,y:s.top},u=0,v=0,w=!1,x={x:t.x,y:t.y},y=Math.atan2(x.x-q,x.y-q),z={initialize:function(a){d=$("#hygro_input"),j=parseInt(d.attr("max")),k=parseInt(d.attr("min")),l=Math.abs(j-k),a.t=parseInt(d.val()),A.setData(a),e=Snap("#humidity"),h=app.getSceneWidth(),i=app.getSceneHeight(),f=e.group(e.image("assets/img/scene/humi_1.svg",.05*-h,.2*-i,370,370),e.image("assets/img/scene/humi_2.svg",.2*h,.5*i,300,300),e.image("assets/img/scene/humi_1.svg",.7*h,.4*i,350,350)).attr({opacity:0}),g=e.group(e.image("assets/img/scene/humi_1.svg",0,.25*i,500,500),e.image("assets/img/scene/humi_1.svg",.35*h,0,500,500),e.image("assets/img/scene/humi_1.svg",.4*h,.45*i,450,450)).attr({opacity:0}),u=Math.round(q*Math.sin(r*Math.PI/180)),v=Math.round(q*-Math.cos(r*Math.PI/180)),n.css({left:u+q-o,top:v+q-p}),A.setHygroValue(r*((j-k)/360)+k).updateHygro(),A.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),A.setHygroValue($(this).val()).updateHygro()}),m.mousedown(function(){w=!0}).mouseup(function(){w=!1}).mousemove(function(a){w&&(x={x:a.clientX-t.x,y:a.clientY-t.y},y=Math.atan2(x.x-q,x.y-q),r=-y/(Math.PI/180)+180,u=Math.round(q*Math.sin(r*Math.PI/180)),v=Math.round(q*-Math.cos(r*Math.PI/180)),n.css({left:u+q-o,top:v+q-p}),A.setHygroValue(r*(l/360)+k).updateHygro())})},setHygroValue:function(c){return d.val(c).attr("val",c),b.initialHygro=b.hygro,b.hygro=c,a.params.setHygro(c),A},updateHygro:function(){c=0,requestAnimFrame(A.changeDisplayVal),A.changeDisplayVal(),A.viewHumi()},changeDisplayVal:function(){b.$display.html(Math.floor(b.hygro)),b.$display.parent().siblings(".circle").eq(0).css("border","3px solid rgba(255,255,255,"+parseFloat(.1+(b.hygro-k)/l)+")")},viewHumi:function(){b.hygro>90?A.animateHumiGroups((b.hygro-k)/l,(b.hygro-k)/l):b.hygro>80?A.animateHumiGroups((b.hygro-k)/l,0):A.animateHumiGroups(0,0)},animateHumiGroups:function(a,b){f.animate({opacity:a},500),g.animate({opacity:b},500)}};a.hygro=z;var A=z}(app),function(a){"use strict";var b={initialize:function(a){c.ext.initialize(a.ext),c.inside.initialize(a.inside)},bindEvents:function(){}};a.temperature=b;var c=b}(app),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k=$(".circle.temperature"),l=$("#slider_temperature"),m=l.width()/2,n=l.height()/2,o=70,p=80,q=k.offset(),r={x:q.left,y:q.top},s=0,t=0,u=!1,v={x:r.x,y:r.y},w=Math.atan2(v.x-o,v.y-o),x={initialize:function(a){e=$("#chaud"),f=$("#froid"),d=$("#temp_int_input"),g=parseInt(d.attr("max")),h=parseInt(d.attr("min")),i=(g+h)/2,j=Math.abs(g-h),a.t=parseInt(d.val()),y.setData(a),s=Math.round(o*Math.sin(p*Math.PI/180)),t=Math.round(o*-Math.cos(p*Math.PI/180)),l.css({left:s+o-m,top:t+o-n}),y.setTemperature(p*(j/360)+h),y.bindEvents(),y.changeDisplayVal()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),y.setTemperature($(this).val()).updateTemperature()}),k.mousedown(function(){u=!0}).mouseup(function(){u=!1}).mousemove(function(a){u&&(v={x:a.clientX-r.x,y:a.clientY-r.y},w=Math.atan2(v.x-o,v.y-o),p=-w/(Math.PI/180)+180,s=Math.round(o*Math.sin(p*Math.PI/180)),t=Math.round(o*-Math.cos(p*Math.PI/180)),l.css({left:s+o-m,top:t+o-n}),y.setTemperature(p*(j/360)+h).updateTemperature())})},setTemperature:function(a){return d.val(a).attr("value",a),b.initialT=b.t,b.t=a,window.app.params.setTempInt(a),y},updateTemperature:function(){c=0,requestAnimFrame(y.changeDisplayVal),y.changeDisplayVal(),y.viewTemperatureInside()},changeDisplayVal:function(){b.$display.html(Math.floor(b.t)),b.$display.parent().siblings(".circle").eq(0).css("border","3px solid rgba(255,255,255,"+parseFloat(.1+(b.t-h)/j)+")")},viewTemperatureInside:function(){b.t>i?(f.css("opacity",0),e.css("opacity",Math.abs((b.t-i)/(.5*j)))):(e.css("opacity",0),f.css("opacity",.7*Math.abs((b.t-i)/(.5*j))))}};a.inside=x;var y=x}(app.temperature),function(a){"use strict";var b,c,d,e,f,g=$(".circle.meteorology"),h=$("#slider_meteorology"),i=h.width()/2,j=h.height()/2,k=70,l=180,m=g.offset(),n={x:m.left,y:m.top},o=0,p=0,q=!1,r={x:n.x,y:n.y},s=Math.atan2(r.x-k,r.y-k),t={initialize:function(a){d=$("#temp_ext_input"),e=parseInt(d.attr("max")),f=parseInt(d.attr("min")),a.t=parseInt(d.val()),u.setData(a),o=Math.round(k*Math.sin(l*Math.PI/180)),p=Math.round(k*-Math.cos(l*Math.PI/180)),h.css({left:o+k-i,top:p+k-j}),u.setTemperature(l*((e-f)/360)+f),u.bindEvents(),u.changeDisplayVal()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),u.setTemperature($(this).val()).updateTemperature()}),g.mousedown(function(){q=!0}).mouseup(function(){q=!1}).mousemove(function(a){q&&(r={x:a.clientX-n.x,y:a.clientY-n.y},s=Math.atan2(r.x-k,r.y-k),l=-s/(Math.PI/180)+180,o=Math.round(k*Math.sin(l*Math.PI/180)),p=Math.round(k*-Math.cos(l*Math.PI/180)),h.css({left:o+k-i,top:p+k-j}),u.setTemperature(l*((e-f)/360)+f).updateTemperature())})},setTemperature:function(a){return d.val(a).attr("value",a),b.initialT=b.t,b.t=a,window.app.params.setTempExt(a),u},updateTemperature:function(){c=0,requestAnimFrame(u.changeDisplayVal),u.changeDisplayVal()},changeDisplayVal:function(){b.$display.html(Math.floor(b.t)),b.$display.parent().siblings(".circle").eq(0).css("border","3px solid rgba(255,255,255,"+parseFloat(.1+(b.t-f)/(e-f))+")")}};a.ext=t;var u=t}(app.temperature),function(a){"use strict";var b,c,d,e,f,g,h,i,j=$(".circle.heating"),k=$("#slider_heating"),l=k.width()/2,m=k.height()/2,n=70,o=0,p=j.offset(),q={x:p.left,y:p.top},r=0,s=0,t=!1,u={x:q.x,y:q.y},v=Math.atan2(u.x-n,u.y-n),w={initialize:function(a){d=$("#grill_input"),a.posX=$("#grill").offset().left,a.posY=$("#grill").offset().top,i=parseInt(d.attr("max")),a.power=parseInt(d.val()),window.app.params.setPositionGrill(a.posX,a.posY),e=Snap("#grill"),h="#BC3D41",f=Snap.load("assets/img/scene/plaque.svg",function(a){g=a.selectAll("ellipse").attr({fill:h,opacity:0}),e.append(g)}),x.setData(a),r=Math.round(n*Math.sin(o*Math.PI/180)),s=Math.round(n*-Math.cos(o*Math.PI/180)),k.css({left:r+n-l,top:s+n-m}),x.setGrillPower(o*(i/360)),x.bindEvents()},getData:function(){return b},setData:function(a){b=a},bindEvents:function(){d.on("change",function(a){a.preventDefault(),x.setGrillPower($(this).val()).updateGrill()}),j.mousedown(function(){t=!0}).mouseup(function(){t=!1}).mousemove(function(a){t&&(u={x:a.clientX-q.x,y:a.clientY-q.y},v=Math.atan2(u.x-n,u.y-n),o=-v/(Math.PI/180)+180,r=Math.round(n*Math.sin(o*Math.PI/180)),s=Math.round(n*-Math.cos(o*Math.PI/180)),k.css({left:r+n-l,top:s+n-m}),x.setGrillPower(o*(i/360)).updateGrill())})},setGrillPower:function(c){return d.val(c).attr("value",c),b.initialPower=b.power,b.power=c,a.params.setGrill(c),x},updateGrill:function(){c=0,requestAnimFrame(x.changeDisplayVal),x.changeDisplayVal(),x.viewGrill()},changeDisplayVal:function(){b.$display.html(Math.floor(b.power)),b.$display.parent().siblings(".circle").eq(0).css("border","3px solid rgba(255,255,255,"+parseFloat(.1+b.power/i)+")")},viewGrill:function(){g.animate({opacity:b.power/i},500)}};a.grill=w;var x=w}(app),function(a){"use strict";var b,c,d={initialize:function(){e.bindEvents()},bindEvents:function(){$('input[type="range"]').on("change",function(a){a.preventDefault(),e.controlOutput()}),$('input:not([type="range"])').on("click",function(a){a.preventDefault(),e.controlOutput()})},controlOutput:function(){b=a.params.getParams(),c=a.params.getPosition(),b.time.hour>20||b.time.hour<7?a.windows.shutter.setState(100).updateState():a.windows.shutter.setState(0).updateState(),(7>b.time.hour||b.time.hour>20||b.luxEnv<25e3)&&a.user.getData()[0].alive?(Math.sqrt(Math.pow(b.user.x-c.luxPlan.x,2)+Math.pow(b.user.y-c.luxPlan.y,2))<200?a.lamps.plan.setLux(300).updateLux():Math.sqrt(Math.pow(b.user.x-c.luxPlan.x,2)+Math.pow(b.user.y-c.luxPlan.y,2))>=200&&a.lamps.plan.setLux(100).updateLux(),Math.sqrt(Math.pow(b.user.x-c.luxHotte.x,2)+Math.pow(b.user.y-c.luxHotte.y,2))<250?a.lamps.hotte.setLux(300).updateLux():Math.sqrt(Math.pow(b.user.x-c.luxHotte.x,2)+Math.pow(b.user.y-c.luxHotte.y,2))<400?a.lamps.hotte.setLux(150).updateLux():Math.sqrt(Math.pow(b.user.x-c.luxHotte.x,2)+Math.pow(b.user.y-c.luxHotte.y,2))>=400&&a.lamps.hotte.setLux(0).updateLux(),Math.sqrt(Math.pow(b.user.x-c.luxTable.x,2)+Math.pow(b.user.y-c.luxTable.y,2))<350?a.lamps.table.setLux(300).updateLux():Math.sqrt(Math.pow(b.user.x-c.luxTable.x,2)+Math.pow(b.user.y-c.luxTable.y,2))>=350&&a.lamps.table.setLux(100).updateLux(),Math.sqrt(Math.pow(b.user.x-c.luxWall.x,2)+Math.pow(b.user.y-c.luxWall.y,2))<200?a.lamps.wall.setLux(300).updateLux():Math.sqrt(Math.pow(b.user.x-c.luxWall.x,2)+Math.pow(b.user.y-c.luxWall.y,2))>=200&&a.lamps.wall.setLux(100).updateLux()):(a.lamps.plan.setLux(0).updateLux(),a.lamps.table.setLux(0).updateLux(),a.lamps.hotte.setLux(0).updateLux(),a.lamps.wall.setLux(0).updateLux()),b.hygrometrie.hygro<80?a.params.setHygroTime(b.hygrometrie.time.low+1,0,0):b.hygrometrie.hygro<90?a.params.setHygroTime(0,b.hygrometrie.time.medium+1,0):a.params.setHygroTime(0,0,b.hygrometrie.time.high+1),b.grill.power<1?a.params.setGrillTime(0,0,0):b.grill.power<1e3?a.params.setGrillTime(b.grill.time.low+1,0,0):b.grill.power<2e3?a.params.setGrillTime(0,b.grill.time.medium+1,0):a.params.setGrillTime(0,0,b.grill.time.high+1)}};a.controller=d;var e=d}(app);